<!DOCTYPE html>
<html>
<head>
  <title>LLM Page</title>
</head>
<body>
  <div id="ai-description" style="
  border: 1px solid #ddd;
  padding: 1rem;
  margin-bottom: 1.5rem;
  border-radius: 8px;
  background: #f9f9f9;
  font-family: system-ui, sans-serif;
">
  <h2 style="margin-top: 0;">AI Code Assistant</h2>

  <p>This is a local AI coding assistant running directly on my laptop. 
  I use it to speed up development, debug issues, and experiment with ideas. 
  You can type a question or paste some code, and it will respond like a smart programming helper.</p>
  *if not working, probably my laptop is off :) </p>
</div>
  <textarea id="input" placeholder="Ask your question here…"></textarea>
  <button onclick="sendPrompt()">Send</button> <!-- Button now calls sendPrompt() -->
  <pre id="response"></pre>
<style>
body {
  font-family: system-ui, sans-serif;
  max-width: 800px;
  margin: auto;
  padding: 1rem;
}

textarea {
  width: 100%;
  box-sizing: border-box; 
  min-height: 120px;
}

#response {
  white-space: pre-wrap;      /* Σπάει γραμμές */
  word-wrap: break-word;      /* Σπάει μεγάλες λέξεις */
  overflow-wrap: break-word;
  max-height: 60vh;           /* Δεν ξεφεύγει στο ύψος */
  overflow-y: auto;           /* Scroll αν χρειαστεί */
  border: 1px solid #ccc;
  padding: 1rem;
}
</style>

  <script>
    const ENDPOINT = "https://margy-unconceptual-catabolically.ngrok-free.dev";
    const API_KEY = "WIN_TEST_SECRET";

    async function sendPrompt() { // Corrected function name
      const inputElement = document.getElementById('input');
      const outputElement = document.getElementById('response');
const prompt = inputElement.value.trim();
if (!prompt) return;

inputElement.value = ""; // καθάρισε το textarea

      outputElement.textContent = "Sending request...";

      try {
        // Key change: Make request to /api/llm endpoint
        const res = await fetch(`${ENDPOINT}/api/llm`, {
          method: "POST",
          headers: {
            "Content-Type": "application/json",
            "x-api-key": API_KEY
          },
          // Key change: Send only the 'prompt', not the full Ollama structure
          body: JSON.stringify({ prompt })
        });

        if (!res.ok) {
          throw new Error(`HTTP error! status: ${res.status}`);
        }

        const data = await res.json();
        // Display the LLM's response. The structure depends on what Ollama returns.
        typeText(data.response || JSON.stringify(data, null, 2));


      } catch (error) {
        outputElement.textContent = `Error: ${error.message}`;
        console.error('Fetch error:', error);
      }
    }
    const inputElement = document.getElementById("input");

inputElement.addEventListener("keydown", function (e) {
  if (e.key === "Enter" && !e.shiftKey) {
    e.preventDefault();       // Μην μπει νέα γραμμή
    sendPrompt();             // Στείλε
  }
});
        function typeText(text) {
  const outputElement = document.getElementById("response");
  outputElement.textContent = "";

  let i = 0;
  const speed = 20;

  const interval = setInterval(() => {
    outputElement.textContent += text.charAt(i);
    outputElement.scrollTop = outputElement.scrollHeight;
    i++;
    if (i >= text.length) clearInterval(interval);
  }, speed);
}


  </script>
</body>
</html>









